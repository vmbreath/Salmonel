(this["webpackJsonpsalmonel-react-app"]=this["webpackJsonpsalmonel-react-app"]||[]).push([[0],{101:function(e,n,t){},106:function(e,n,t){},121:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t(0),i=t.n(r),c=t(10),s=t.n(c),o=(t(99),t(18)),l=t.n(o),u=t(27),d=t(180),h=(t(101),t(29)),j=t(166),f=t(169),p=t(172),b=t(176),g=t(175),O=t(171),x=t(173),A=t(187),m=t(174),y=t(16),v=t(46),F=function(e){try{var n=localStorage.getItem(e);if(null===n)return;return JSON.parse(n)}catch(t){return}},k=function(e,n){try{var t=JSON.stringify(e);localStorage.setItem(n,t)}catch(a){throw new Error("Can't save changes in local storage")}},w=F("reducer"),H=w?w.state:{data:["first-load"],oAntigenVariants:[],h1AntigenVariants:[],h2AntigenVariants:[],queryFilter:{find:{OAntigen:[],H1Antigen:[],H2Antigen:[]},exclude:{OAntigen:[],H1Antigen:[],H2Antigen:[]}}},V=Object(v.b)({name:"search",initialState:H,reducers:{setNewData:function(e,n){e.data=n.payload,n.payload.forEach((function(n){var t=n.o_antigen,a=n.h_antigen1,r=n.h_antigen2,i=function(e,n){var t=function(e){return"["===e[0]||"{"===e[0]||"("===e[0]?"]"===e[e.length-1]||"}"===e[e.length-1]||")"===e[e.length-1]?e.slice(1,-1):e.slice(1):"]"===e[e.length-1]||"}"===e[e.length-1]||")"===e[e.length-1]?e.slice(0,-1):e}(e);t.includes(",")?t.split(",").forEach((function(e){n.find((function(n){return n[0]===e}))||n.push([e,"white"])})):n.find((function(e){return e[0]===t}))||n.push([t,"white"])};t.forEach((function(n){i(n,e.oAntigenVariants)})),a.forEach((function(n){i(n,e.h1AntigenVariants)})),r.forEach((function(n){i(n,e.h2AntigenVariants)}))})),e.oAntigenVariants=e.oAntigenVariants.sort((function(e,n){var t=e[0],a=n[0];return t.includes("!")&&(t=t.slice(0,t.length-1)),a.includes("!")&&(a=a.slice(0,a.length-1)),t.includes("Vi")&&(t=99999),a.includes("Vi")&&(a=99999),t-a})),e.h1AntigenVariants=e.h1AntigenVariants.sort(),e.h2AntigenVariants=e.h2AntigenVariants.sort()},updateNewData:function(e,n){e.data=n.payload,console.log(e.data)},updateOAntigenVariants:function(e,n){var t=e.oAntigenVariants[n.payload];if("white"===t[1])t[1]="#AAFFB3",e.queryFilter.find.OAntigen.push(t[0]);else if("#AAFFB3"===t[1]){t[1]="#FFAFAA",e.queryFilter.exclude.OAntigen.push(t[0]);var a=e.queryFilter.find.OAntigen.indexOf(t[0]);e.queryFilter.find.OAntigen.splice(a,1)}else if("#FFAFAA"===t[1]){t[1]="white";var r=e.queryFilter.exclude.OAntigen.indexOf(t[0]);e.queryFilter.exclude.OAntigen.splice(r,1)}},updateH1AntigenVariants:function(e,n){var t=e.h1AntigenVariants[n.payload];if("white"===t[1])t[1]="#AAFFB3",e.queryFilter.find.H1Antigen.push(t[0]);else if("#AAFFB3"===t[1]){t[1]="#FFAFAA",e.queryFilter.exclude.H1Antigen.push(t[0]);var a=e.queryFilter.find.H1Antigen.indexOf(t[0]);e.queryFilter.find.H1Antigen.splice(a,1)}else if("#FFAFAA"===t[1]){t[1]="white";var r=e.queryFilter.exclude.H1Antigen.indexOf(t[0]);e.queryFilter.exclude.H1Antigen.splice(r,1)}},updateH2AntigenVariants:function(e,n){var t=e.h2AntigenVariants[n.payload];if("white"===t[1])t[1]="#AAFFB3",e.queryFilter.find.H2Antigen.push(t[0]);else if("#AAFFB3"===t[1]){t[1]="#FFAFAA",e.queryFilter.exclude.H2Antigen.push(t[0]);var a=e.queryFilter.find.H2Antigen.indexOf(t[0]);e.queryFilter.find.H2Antigen.splice(a,1)}else if("#FFAFAA"===t[1]){t[1]="white";var r=e.queryFilter.exclude.H2Antigen.indexOf(t[0]);e.queryFilter.exclude.H2Antigen.splice(r,1)}},clearQueryFilter:function(e){e.oAntigenVariants.forEach((function(e){e[1]="white"})),e.h1AntigenVariants.forEach((function(e){e[1]="white"})),e.h2AntigenVariants.forEach((function(e){e[1]="white"})),e.queryFilter={find:{OAntigen:[],H1Antigen:[],H2Antigen:[]},exclude:{OAntigen:[],H1Antigen:[],H2Antigen:[]}}}}}),N=V.actions,S=N.clearQueryFilter,C=N.updateH1AntigenVariants,q=N.updateH2AntigenVariants,E=N.setNewData,P=N.updateOAntigenVariants,T=N.updateNewData,W=function(e){return e.search.data},B=function(e){return e.search.oAntigenVariants},I=function(e){return e.search.h1AntigenVariants},z=function(e){return e.search.h2AntigenVariants},D=function(e){return e.search.queryFilter},J=V.reducer,L=(V.reducer,V.actions,[{id:"allgroups",label:"\u0413\u0440\u0443\u043f\u043f\u0430",minWidth:60},{id:"serovar",label:"\u0421\u0435\u0440\u043e\u0432\u0430\u0440",minWidth:60},{id:"o_antigen",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b",minWidth:40},{id:"h_antigen1",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 H \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b (\u0424\u0430\u0437\u0430 1)",minWidth:40},{id:"h_antigen2",label:"\u0421\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 H \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b (\u0424\u0430\u0437\u0430 2)",minWidth:40}]),R=Object(j.a)({root:{maxWidth:690,marginLeft:"auto",marginRight:"auto"},container:{maxHeight:"70vh"}});function _(){var e=Object(y.b)(),n=Object(y.c)(W),t=R(),c=i.a.useState(0),s=Object(h.a)(c,2),o=s[0],d=s[1],j=i.a.useState(15),v=Object(h.a)(j,2),F=v[0],k=v[1],w=Object(y.c)(D);Object(r.useEffect)((function(){"first-load"===n[0]&&H().then((function(n){e(E(n))}))}),[]),Object(r.useEffect)(Object(u.a)(l.a.mark((function n(){var t,a,r,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new URL("https://salmonel-heroku.herokuapp.com/filter"),a=[["filter",JSON.stringify(w)]],t.search=new URLSearchParams(a).toString(),n.next=5,fetch(t);case 5:return r=n.sent,n.next=8,r.json();case 8:i=n.sent,e(T(i)),d(0);case 11:case"end":return n.stop()}}),n)}))),[w]);var H=function(){var e=Object(u.a)(l.a.mark((function e(){var n,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://salmonel-heroku.herokuapp.com/test",e.next=3,fetch("https://salmonel-heroku.herokuapp.com/test");case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,e.next=9,t;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(f.a,{className:t.root,children:[Object(a.jsx)(O.a,{className:t.container,children:Object(a.jsxs)(p.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[Object(a.jsx)(x.a,{children:Object(a.jsx)(m.a,{style:{height:33},children:L.map((function(e){return Object(a.jsx)(g.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(a.jsx)(b.a,{children:n.slice(o*F,o*F+F).map((function(e){return Object(a.jsx)(m.a,{hover:!0,role:"checkbox",tabIndex:-1,children:L.map((function(n){var t=e[n.id];return Array.isArray(t)&&(t=t.join(", ")),Object(a.jsx)(g.a,{align:n.align,children:n.format&&"number"===typeof t?n.format(t):t},n.id)}))},e.code)}))})]})}),Object(a.jsx)(A.a,{rowsPerPageOptions:[15,50,100,500],component:"div",count:n.length,rowsPerPage:F,page:o,onChangePage:function(e,n){d(n)},onChangeRowsPerPage:function(e){k(+e.target.value),d(0)}})]})}var U=t(189),M=t(190),Q=t(184),G=t(182),K=t(183),X=t(181),Y=F("token"),Z={token:Y?Y.state.token:void 0,isAuthenticated:!1},$=Object(v.b)({name:"authorization",initialState:Z,reducers:{setNewToken:function(e,n){e.token=n.payload},setIsAuthenticated:function(e,n){e.isAuthenticated=n.payload}}}),ee=$.actions,ne=ee.setIsAuthenticated,te=ee.setNewToken,ae=function(e){return e.authorization.token},re=function(e){return e.authorization.isAuthenticated},ie=$.reducer;$.reducer,$.actions;function ce(){var e=Object(y.b)(),n=i.a.useState(!0),t=Object(h.a)(n,2),r=t[0],c=t[1],s=i.a.useState(!1),o=Object(h.a)(s,2),j=o[0],f=o[1],p=i.a.useState(""),b=Object(h.a)(p,2),g=b[0],O=b[1],x=function(){c(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){c(!0)},children:"Open form dialog"}),Object(a.jsxs)(M.a,{open:r,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(X.a,{id:"form-dialog-title",children:"\u0420\u0435\u0436\u0438\u043c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(K.a,{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)(U.a,{autoFocus:!0,error:j,helperText:j?"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c!":"",margin:"dense",id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",fullWidth:!0,onChange:function(e){O(e.target.value)}})]}),Object(a.jsxs)(Q.a,{children:[Object(a.jsx)(d.a,{onClick:x,color:"primary",children:"Cancel"}),Object(a.jsx)(d.a,{onClick:function(){(function(){var n=Object(u.a)(l.a.mark((function n(){var t,a,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new URL("https://salmonel-heroku.herokuapp.com/login"),n.next=3,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userName:"admin",password:g})});case 3:return a=n.sent,n.next=6,a.json();case 6:(r=n.sent)&&(k({state:r},"token"),e(te(r)),e(ne(!0)),c(!1)),console.log("result",r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()().catch((function(e){console.log("errrr",e),f(!0)}))},color:"primary",children:"Submit"})]})]})]})}var se=t(5),oe=t(185),le=Object(j.a)((function(e){return{root:{},dropdown:{position:"absolute",float:"bottom",left:"1vw",width:"95vw",zIndex:5,border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper}}})),ue=Object(se.a)({root:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 0px",border:"1px solid",lineHeight:1.5,borderColor:"#3f51b5",fontFamily:"sans-serif"}})(d.a);function de(e){var n=e.data,t=e.name,r=Object(y.b)(),c=le(),s=i.a.useState(!1),o=Object(h.a)(s,2),l=o[0],u=o[1];return Object(a.jsx)(oe.a,{onClickAway:function(){u(!1)},children:Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(d.a,{style:{textTransform:"none"},variant:"contained",color:"primary",onClick:function(){u((function(e){return!e}))},children:t}),l?Object(a.jsx)("div",{className:c.dropdown,children:n.map((function(e,n){return Object(a.jsx)(ue,{onClick:function(){return function(e){"\u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===t?r(P(e)):"H1 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===t?r(C(e)):"H2 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"===t&&r(q(e))}(n)},color:"primary",style:{backgroundColor:e[1]},children:e[0]},e[0])}))}):null]})})}var he=function(){function e(){return(e=Object(u.a)(l.a.mark((function e(n){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,a=n.target.files,console.log("data",a[0]),t.append("table",a[0]),"https://salmonel-heroku.herokuapp.com/uploadtable",e.next=7,fetch("https://salmonel-heroku.herokuapp.com/uploadtable",{method:"POST",body:t});case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:"admin",children:[Object(a.jsx)("h2",{children:"ADMIN"}),Object(a.jsx)("input",{onChange:function(n){return e.apply(this,arguments)},type:"file",id:"image_uploads"})]})},je=t(50),fe=t(14),pe=t(177),be=t(80),ge=t.n(be);t(106);function Oe(){var e=Object(y.c)(D);return Object(a.jsx)("div",{children:Object(a.jsxs)("fieldset",{children:[Object(a.jsx)("legend",{align:"left",children:"\u041f\u043e\u0438\u0441\u043a"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{style:{fontWeight:"bold"},children:"O:"}),Object(a.jsx)("span",{style:{color:"green"},children:e.find.OAntigen.map((function(e,n){return n>0?","+e:e}))}),Object(a.jsx)("span",{style:{color:"red"},children:e.exclude.OAntigen.map((function(n,t){return t>0||e.find.OAntigen.length>0?","+n:n}))}),Object(a.jsx)("span",{style:{fontWeight:"bold"},children:"    H1:"}),Object(a.jsx)("span",{style:{color:"green"},children:e.find.H1Antigen.map((function(e,n){return n>0?","+e:e}))}),Object(a.jsx)("span",{style:{color:"red"},children:e.exclude.H1Antigen.map((function(n,t){return t>0||e.find.H1Antigen.length>0?","+n:n}))}),Object(a.jsx)("span",{style:{fontWeight:"bold"},children:"    H2:"}),Object(a.jsx)("span",{style:{color:"green"},children:e.find.H2Antigen.map((function(e,n){return n>0?","+e:e}))}),Object(a.jsx)("span",{style:{color:"red"},children:e.exclude.H2Antigen.map((function(n,t){return t>0||e.find.H2Antigen.length>0?","+n:n}))})]})]})})}var xe=t.p+"static/media/admin.7c4683f0.png";var Ae=function(){var e=Object(y.b)(),n=Object(y.c)(ae),t=Object(y.c)(re),i=Object(y.c)(B),c=Object(y.c)(I),s=Object(y.c)(z);Object(r.useEffect)((function(){(function(){var n=Object(u.a)(l.a.mark((function n(){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:t=n.sent,e(ne(t));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[n]);var o=function(){var e=Object(u.a)(l.a.mark((function e(){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||t){e.next=13;break}return a=new URL("https://salmonel-heroku.herokuapp.com/verifier"),e.next=4,fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",token:n||"no token"},body:JSON.stringify({userName:"admin"})});case 4:return r=e.sent,e.next=7,r.json();case 7:if("ololo"!==(i=e.sent).data){e.next=11;break}return console.log("result!",i),e.abrupt("return",!0);case 11:return console.log("result",i),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(je.a,{basename:"/",children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{children:[Object(a.jsx)(je.b,{className:"link",to:"/search",children:Object(a.jsx)(d.a,{variant:"contained",color:"link",children:"\u041e\u041f\u0420\u0415\u0414\u0415\u041b\u0418\u0422\u042c \u0411\u0410\u041a\u0422\u0415\u0420\u0418\u0418"})}),Object(a.jsx)(je.b,{className:"link",to:"/info",children:Object(a.jsx)(d.a,{variant:"contained",color:"link",children:"\u041b\u0415\u0413\u0415\u041d\u0414\u0410"})}),Object(a.jsx)(je.b,{className:"link",to:"/contacts",children:Object(a.jsx)(d.a,{variant:"contained",color:"link",children:"\u041e\u0411\u0420\u0410\u0422\u041d\u0410\u042f \u0421\u0412\u042f\u0417\u042c"})}),Object(a.jsx)(je.b,{className:"link",to:"/admin",children:Object(a.jsx)(d.a,{variant:"contained",color:"link",children:Object(a.jsx)("img",{src:xe,alt:"\u0410\u0434\u043c\u0438\u043d"})})})]}),Object(a.jsxs)(fe.c,{children:[Object(a.jsx)(fe.a,{path:"/search",children:Object(a.jsxs)("div",{className:"search",children:[Object(a.jsxs)("div",{className:"filter",children:[Object(a.jsxs)("div",{className:"filterResults",children:[Object(a.jsx)(Oe,{}),Object(a.jsx)(pe.a,{onClick:function(){e(S())},"aria-label":"delete",children:Object(a.jsx)(ge.a,{})})]}),Object(a.jsxs)("div",{className:"filterButtons",children:[Object(a.jsx)(de,{data:i,name:"\u041e \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"}),Object(a.jsx)(de,{data:c,name:"H1 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"}),Object(a.jsx)(de,{data:s,name:"H2 \u0430\u043d\u0442\u0438\u0433\u0435\u043d\u044b"})]})]}),Object(a.jsx)(_,{})]})}),Object(a.jsx)(fe.a,{path:"/admin",render:function(){return t?Object(a.jsx)(he,{}):Object(a.jsx)(ce,{})}}),Object(a.jsx)(fe.a,{path:"/info",children:Object(a.jsx)("p",{children:"info"})}),Object(a.jsx)(fe.a,{path:"/contacts",children:Object(a.jsx)("p",{children:"contacts"})}),Object(a.jsx)(fe.a,{path:"/",children:Object(a.jsx)("p",{children:"main window"})})]})]})})},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,193)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),i(e),c(e)}))},ye=Object(v.a)({reducer:{search:J,authorization:ie}}),ve=t(81),Fe=t.n(ve);ye.subscribe(Fe()((function(){k({state:ye.getState().search},"reducer")}),1e3)),s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(y.a,{store:ye,children:Object(a.jsx)(Ae,{})})}),document.getElementById("root")),me()},99:function(e,n,t){}},[[121,1,2]]]);
//# sourceMappingURL=main.e04e5e10.chunk.js.map